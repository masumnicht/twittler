<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel='stylesheet' href='style.css'>
  </head>
  <body>
    <script>
      $(document).ready(function(){ 
        window.users.forEach(function(el){;
          var $userName = $('<li><a class=' + el + ' title="Show Tweets For ' + el + '">' + '@' + el + '</a></li>');
          $userName.appendTo($('.userList'));
        });
        var $twittlerStream = $('.twittlerStream');
        var totalTweetCounter = 0;
        var retrieveTweets = function(){
            var index = streams.home.length-1;
            var newTweetNum = index-totalTweetCounter;
            while(newTweetNum>=0){
              var tweet = streams.home[totalTweetCounter];
              var $tweet = $('<div class="row ' + tweet.user + '">' +
                                '<a class="col-md-2"' + tweet.user + '>@' + tweet.user + '</a>' + 
                                '<div class="message col-md-6">' + tweet.message + '</div>' + 
                                '<div class="timeStamp col-md-4">' + tweet.created_at + '</div>' +
                              '</div>');
              $tweet.prependTo($twittlerStream).hide().fadeIn(2000);
              newTweetNum--;
              totalTweetCounter++;
            }
        };
        retrieveTweets();
        $('.userList li').on('click', function(){
          $('li').not(this).hide();
          $('.allTweets').remove();
          $('.userList').append($('<button class="allTweets btn-primary">Show All Tweets</buttons>'));
          $('.allTweets').on('click', function() {
            $('.allTweets').remove();
            $('li').not(this).show();
          })
        })

        var tweetChecker = (function(){
          return setInterval(retrieveTweets,5000);
        })()
      });
    </script> 
    <div class='container'>
      <div class='col-md-12 well text-center'>
        Welcome to Twittler!
      </div>
      <div class='userNames col-md-2'>
        <ul class='userList list-unstyled'>
          Currently Following:
        </ul>
      </div>
      <div class='twittlerStream col-md-9'>
      </div>
    </div>
  </body>
</html>
